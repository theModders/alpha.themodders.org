{"version":3,"sources":["../../../server/forum/forum.js"],"names":["Thread","require","Utils","module","exports","PATH_PREFIX_REGEXP","RegExp","handleRequest","req","res","thread","retrieve","path","replace","status","send","renderPage","render"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,YAAD,CAArB;;AAEAE,MAAM,CAACC,OAAP,GAAiB;AAChBC,EAAAA,kBAAkB,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADJ;;AAGhB,QAAMC,aAAN,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAC7B,UAAMC,MAAM,GAAGV,MAAM,CAACW,QAAP,CAAgBH,GAAG,CAACI,IAAJ,CAASC,OAAT,CAAiB,KAAKR,kBAAtB,EAA0C,EAA1C,CAAhB,CAAf;;AACA,QAAI,CAAEK,MAAN,EAAc;AACbD,MAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,WAArB;AACA,KAFD,MAEO;AACNN,MAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBb,KAAK,CAACc,UAAN,CAAiBN,MAAM,CAACO,MAAP,EAAjB,CAArB;AACA;AACD;;AAVe,CAAjB","sourcesContent":["const Thread = require(\"./thread.js\");\nconst Utils = require(\"./utils.js\");\n\nmodule.exports = {\n\tPATH_PREFIX_REGEXP: new RegExp(\"^/forum/\"),\n\n\tasync handleRequest(req, res) {\n\t\tconst thread = Thread.retrieve(req.path.replace(this.PATH_PREFIX_REGEXP, \"\"));\n\t\tif (! thread) {\n\t\t\tres.status(404).send(\"not found\");\n\t\t} else {\n\t\t\tres.status(200).send(Utils.renderPage(thread.render()));\n\t\t}\n\t}\n}"],"file":"forum.js"}